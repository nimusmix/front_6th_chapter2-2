import{r as k,a as fe,j as e,c as _e}from"./client-D0sMPr8_.js";const K={},ce=(t,r)=>t.unstable_is?t.unstable_is(r):r===t,le=t=>"init"in t,F=t=>!!t.write,de=t=>"v"in t||"e"in t,H=t=>{if("e"in t)throw t.e;if((K?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},X=new WeakMap,ue=t=>{var r;return Y(t)&&!!((r=X.get(t))!=null&&r[0])},Le=t=>{const r=X.get(t);r?.[0]&&(r[0]=!1,r[1].forEach(s=>s()))},ge=(t,r)=>{let s=X.get(t);if(!s){s=[!0,new Set],X.set(t,s);const n=()=>{s[0]=!1};t.then(n,n)}s[1].add(r)},Y=t=>typeof t?.then=="function",pe=(t,r,s)=>{s.p.has(t)||(s.p.add(t),r.then(()=>{s.p.delete(t)},()=>{s.p.delete(t)}))},ee=(t,r,s)=>{const n=s(t),a="v"in n,d=n.v;if(Y(r))for(const c of n.d.keys())pe(t,r,s(c));n.v=r,delete n.e,(!a||!Object.is(d,n.v))&&(++n.n,Y(d)&&Le(d))},xe=(t,r,s)=>{var n;const a=new Set;for(const d of((n=s.get(t))==null?void 0:n.t)||[])s.has(d)&&a.add(d);for(const d of r.p)a.add(d);return a},Ae=Symbol(),Te=(t=new WeakMap,r=new WeakMap,s=new WeakMap,n=new Set,a=new Set,d=new Set,c={},y=(u,...j)=>u.read(...j),i=(u,...j)=>u.write(...j),o=(u,j)=>{var w;return(w=u.unstable_onInit)==null?void 0:w.call(u,j)},m=(u,j)=>{var w;return(w=u.onMount)==null?void 0:w.call(u,j)},...x)=>{const u=x[0]||(l=>{if((K?"production":void 0)!=="production"&&!l)throw new Error("Atom is undefined or null");let v=t.get(l);return v||(v={d:new Map,p:new Set,n:0},t.set(l,v),o?.(l,C)),v}),j=x[1]||(()=>{const l=[],v=b=>{try{b()}catch(p){l.push(p)}};do{c.f&&v(c.f);const b=new Set,p=b.add.bind(b);n.forEach(h=>{var f;return(f=r.get(h))==null?void 0:f.l.forEach(p)}),n.clear(),d.forEach(p),d.clear(),a.forEach(p),a.clear(),b.forEach(v),n.size&&w()}while(n.size||d.size||a.size);if(l.length)throw new AggregateError(l)}),w=x[2]||(()=>{const l=[],v=new WeakSet,b=new WeakSet,p=Array.from(n);for(;p.length;){const h=p[p.length-1],f=u(h);if(b.has(h)){p.pop();continue}if(v.has(h)){if(s.get(h)===f.n)l.push([h,f]);else if((K?"production":void 0)!=="production"&&s.has(h))throw new Error("[Bug] invalidated atom exists");b.add(h),p.pop();continue}v.add(h);for(const _ of xe(h,f,r))v.has(_)||p.push(_)}for(let h=l.length-1;h>=0;--h){const[f,_]=l[h];let A=!1;for(const $ of _.d.keys())if($!==f&&n.has($)){A=!0;break}A&&(T(f),R(f)),s.delete(f)}}),T=x[3]||(l=>{var v;const b=u(l);if(de(b)&&(r.has(l)&&s.get(l)!==b.n||Array.from(b.d).every(([N,J])=>T(N).n===J)))return b;b.d.clear();let p=!0;const h=()=>{r.has(l)&&(R(l),w(),j())},f=N=>{var J;if(ce(l,N)){const g=u(N);if(!de(g))if(le(N))ee(N,N.init,u);else throw new Error("no atom init");return H(g)}const M=T(N);try{return H(M)}finally{b.d.set(N,M.n),ue(b.v)&&pe(l,b.v,M),(J=r.get(N))==null||J.t.add(l),p||h()}};let _,A;const $={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(K?"production":void 0)!=="production"&&!F(l)&&console.warn("setSelf function cannot be used with read-only atom"),!A&&F(l)&&(A=(...N)=>{if((K?"production":void 0)!=="production"&&p&&console.warn("setSelf function cannot be called in sync"),!p)try{return D(l,...N)}finally{w(),j()}}),A}},z=b.n;try{const N=y(l,f,$);return ee(l,N,u),Y(N)&&(ge(N,()=>_?.abort()),N.then(h,h)),b}catch(N){return delete b.v,b.e=N,++b.n,b}finally{p=!1,z!==b.n&&s.get(l)===z&&(s.set(l,b.n),n.add(l),(v=c.c)==null||v.call(c,l))}}),V=x[4]||(l=>{const v=[l];for(;v.length;){const b=v.pop(),p=u(b);for(const h of xe(b,p,r)){const f=u(h);s.set(h,f.n),v.push(h)}}}),D=x[5]||((l,...v)=>{let b=!0;const p=f=>H(T(f)),h=(f,..._)=>{var A;const $=u(f);try{if(ce(l,f)){if(!le(f))throw new Error("atom not writable");const z=$.n,N=_[0];ee(f,N,u),R(f),z!==$.n&&(n.add(f),(A=c.c)==null||A.call(c,f),V(f));return}else return D(f,..._)}finally{b||(w(),j())}};try{return i(l,p,h,...v)}finally{b=!1}}),R=x[6]||(l=>{var v;const b=u(l),p=r.get(l);if(p&&!ue(b.v)){for(const[h,f]of b.d)if(!p.d.has(h)){const _=u(h);q(h).t.add(l),p.d.add(h),f!==_.n&&(n.add(h),(v=c.c)==null||v.call(c,h),V(h))}for(const h of p.d||[])if(!b.d.has(h)){p.d.delete(h);const f=O(h);f?.t.delete(l)}}}),q=x[7]||(l=>{var v;const b=u(l);let p=r.get(l);if(!p){T(l);for(const h of b.d.keys())q(h).t.add(l);if(p={l:new Set,d:new Set(b.d.keys()),t:new Set},r.set(l,p),(v=c.m)==null||v.call(c,l),F(l)){const h=()=>{let f=!0;const _=(...A)=>{try{return D(l,...A)}finally{f||(w(),j())}};try{const A=m(l,_);A&&(p.u=()=>{f=!0;try{A()}finally{f=!1}})}finally{f=!1}};a.add(h)}}return p}),O=x[8]||(l=>{var v;const b=u(l);let p=r.get(l);if(p&&!p.l.size&&!Array.from(p.t).some(h=>{var f;return(f=r.get(h))==null?void 0:f.d.has(l)})){p.u&&d.add(p.u),p=void 0,r.delete(l),(v=c.u)==null||v.call(c,l);for(const h of b.d.keys()){const f=O(h);f?.t.delete(l)}return}return p}),U=[t,r,s,n,a,d,c,y,i,o,m,u,j,w,T,V,D,R,q,O],C={get:l=>H(T(l)),set:(l,...v)=>{try{return D(l,...v)}finally{w(),j()}},sub:(l,v)=>{const p=q(l).l;return p.add(v),j(),()=>{p.delete(v),O(l),j()}}};return Object.defineProperty(C,Ae,{value:U}),C},Ee=Te,me=ge,be={};let Pe=0;function E(t,r){const s=`atom${++Pe}`,n={toString(){return(be?"production":void 0)!=="production"&&this.debugLabel?s+":"+this.debugLabel:s}};return typeof t=="function"?n.read=t:(n.init=t,n.read=Me,n.write=Ie),r&&(n.write=r),n}function Me(t){return t(this)}function Ie(t,r,s){return r(this,typeof s=="function"?s(t(this)):s)}function ye(){return Ee()}let G;function Ve(){return G||(G=ye(),(be?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=G),globalThis.__JOTAI_DEFAULT_STORE__!==G&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),G}const De={},ve=k.createContext(void 0);function je(t){return k.useContext(ve)||Ve()}function qe({children:t,store:r}){const s=k.useRef(void 0);return!r&&!s.current&&(s.current=ye()),k.createElement(ve.Provider,{value:r||s.current},t)}const se=t=>typeof t?.then=="function",ne=t=>{t.status||(t.status="pending",t.then(r=>{t.status="fulfilled",t.value=r},r=>{t.status="rejected",t.reason=r}))},$e=fe.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(ne(t),t)}),te=new WeakMap,he=(t,r)=>{let s=te.get(t);return s||(s=new Promise((n,a)=>{let d=t;const c=o=>m=>{d===o&&n(m)},y=o=>m=>{d===o&&a(m)},i=()=>{try{const o=r();se(o)?(te.set(o,s),d=o,o.then(c(o),y(o)),me(o,i)):n(o)}catch(o){a(o)}};t.then(c(t),y(t)),me(t,i)}),te.set(t,s)),s};function I(t,r){const{delay:s,unstable_promiseStatus:n=!fe.use}={},a=je(),[[d,c,y],i]=k.useReducer(m=>{const x=a.get(t);return Object.is(m[0],x)&&m[1]===a&&m[2]===t?m:[x,a,t]},void 0,()=>[a.get(t),a,t]);let o=d;if((c!==a||y!==t)&&(i(),o=a.get(t)),k.useEffect(()=>{const m=a.sub(t,()=>{if(n)try{const x=a.get(t);se(x)&&ne(he(x,()=>a.get(t)))}catch{}if(typeof s=="number"){setTimeout(i,s);return}i()});return i(),m},[a,t,s,n]),k.useDebugValue(o),se(o)){const m=he(o,()=>a.get(t));return n&&ne(m),$e(m)}return o}function Re(t,r){const s=je();return k.useCallback((...a)=>{if((De?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return s.set(t,...a)},[s,t])}function L(t,r){return[I(t),Re(t)]}const re={},Oe=Symbol((re?"production":void 0)!=="production"?"RESET":""),we=t=>typeof t?.then=="function";function We(t=()=>{try{return window.localStorage}catch(s){(re?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(s);return}},r){var s;let n,a;const d={getItem:(i,o)=>{var m,x;const u=w=>{if(w=w||"",n!==w){try{a=JSON.parse(w,r?.reviver)}catch{return o}n=w}return a},j=(x=(m=t())==null?void 0:m.getItem(i))!=null?x:null;return we(j)?j.then(u):u(j)},setItem:(i,o)=>{var m;return(m=t())==null?void 0:m.setItem(i,JSON.stringify(o,void 0))},removeItem:i=>{var o;return(o=t())==null?void 0:o.removeItem(i)}},c=i=>(o,m,x)=>i(o,u=>{let j;try{j=JSON.parse(u||"")}catch{j=x}m(j)});let y;try{y=(s=t())==null?void 0:s.subscribe}catch{}return!y&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(y=(i,o)=>{if(!(t()instanceof window.Storage))return()=>{};const m=x=>{x.storageArea===t()&&x.key===i&&o(x.newValue)};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}}),y&&(d.subscribe=c(y)),d}const Be=We();function ie(t,r,s=Be,n){const a=E(r);return(re?"production":void 0)!=="production"&&(a.debugPrivate=!0),a.onMount=c=>{c(s.getItem(t,r));let y;return s.subscribe&&(y=s.subscribe(t,c,r)),y},E(c=>c(a),(c,y,i)=>{const o=typeof i=="function"?i(c(a)):i;return o===Oe?(y(a,r),s.removeItem(t)):we(o)?o.then(m=>(y(a,m),s.setItem(t,m))):(y(a,o),s.setItem(t,o))})}const ze=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],Je=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],Z=ie("products",ze),Ue=ie("coupons",Je),B=ie("cart",[]),Ge=E(null),oe=E(!1),ae=E(""),Ke=E(!1),Qe=E("products"),He=E(!1),Xe=E(null),Ye=E({name:"",price:0,stock:0,description:"",discounts:[]}),Ze=E({name:"",code:"",discountType:"amount",discountValue:0}),Q=E([]),Fe=E(t=>t(B).reduce((s,n)=>s+n.quantity,0)),et=E(t=>t(B).length),tt=E(t=>{const r=t(Z),s=t(ae);return s.trim()?r.filter(n=>n.name.toLowerCase().includes(s.toLowerCase())||n.description?.toLowerCase().includes(s.toLowerCase())):r}),st=()=>{const[t,r]=L(oe),[s,n]=L(ae),a=I(et),d=I(Fe);return e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!t&&e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:s,onChange:c=>n(c.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r(!t),className:`px-3 py-1.5 text-sm rounded transition-colors ${t?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:t?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!t&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),a>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:d})]})]})]})})})},nt=(t,r)=>{const{discounts:s}=t.product,{quantity:n}=t,a=s.reduce((c,y)=>n>=y.quantity&&y.rate>c?y.rate:c,0);return r.some(c=>c.quantity>=10)?Math.min(a+.05,.5):a},Ne=(t,r)=>{const{price:s}=t.product,{quantity:n}=t,a=nt(t,r);return Math.round(s*n*(1-a))},rt=(t,r)=>{let s=0,n=0;return t.forEach(a=>{const d=a.product.price*a.quantity;s+=d,n+=Ne(a,t)}),r&&(r.discountType==="amount"?n=Math.max(0,n-r.discountValue):n=Math.round(n*(1-r.discountValue/100))),{totalBeforeDiscount:Math.round(s),totalAfterDiscount:Math.round(n)}},ke=(t,r)=>{const s=r.find(a=>a.product.id===t.id);return t.stock-(s?.quantity||0)},Se=(t,r,s,n,a=!1)=>{if(r&&s&&n){const d=s.find(c=>c.id===r);if(d&&ke(d,n)<=0)return"SOLD OUT"}return a?`${t.toLocaleString()}원`:`₩${t.toLocaleString()}`},it=({product:t})=>{const r=I(B),s=I(oe),[,n]=L(B),[,a]=L(Q),d=ke(t,r),c=(i,o)=>Se(i,o,[t],r,s),y=i=>{n(m=>m.find(u=>u.product.id===i.id)?m.map(u=>u.product.id===i.id?{...u,quantity:u.quantity+1}:u):[...m,{product:i,quantity:1}]);const o={id:Date.now().toString(),message:"장바구니에 담았습니다",type:"success",timestamp:Date.now()};a(m=>[...m,o]),setTimeout(()=>{a(m=>m.filter(x=>x.id!==o.id))},3e3)};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),t.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...t.discounts.map(i=>i.rate))*100,"%"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:c(t.price,t.id)}),t.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[t.discounts[0].quantity,"개 이상 구매시 할인 ",t.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[d<=5&&d>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",d,"개 남음"]}),d>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",d,"개"]})]}),e.jsx("button",{onClick:()=>y(t),disabled:d<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${d<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:d<=0?"품절":"장바구니 담기"})]})]})},ot=()=>{const t=I(Z),r=I(tt),s=I(ae);return e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',s,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(n=>e.jsx(it,{product:n},n.id))})]})},at=()=>{const t=I(B),r=I(Z),[,s]=L(B),[,n]=L(Q),a=c=>{s(y=>y.filter(i=>i.product.id!==c))},d=(c,y)=>{if(y<=0){a(c);return}const i=r.find(o=>o.id===c);if(i&&y>i.stock){const o={id:Date.now().toString(),message:`재고는 ${i.stock}개까지만 있습니다.`,type:"warning",timestamp:Date.now()};n(m=>[...m,o]),setTimeout(()=>{n(m=>m.filter(x=>x.id!==o.id))},3e3);return}s(o=>o.map(m=>m.product.id===c?{...m,quantity:y}:m))};return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:t.map(c=>{const y=Ne(c,t),i=c.product.price*c.quantity,o=y<i,m=o?Math.round((1-y/i)*100):0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:c.product.name}),e.jsx("button",{onClick:()=>a(c.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>d(c.product.id,c.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:c.quantity}),e.jsx("button",{onClick:()=>d(c.product.id,c.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[o&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",m,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(y).toLocaleString(),"원"]})]})]})]},c.product.id)})})]})},ct=()=>{const t=I(Q),[,r]=L(Q),s=n=>{r(a=>a.filter(d=>d.id!==n))};return t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:t.map(n=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${n.type==="error"?"bg-red-600":n.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[e.jsx("span",{className:"mr-2",children:n.message}),e.jsx("button",{onClick:()=>s(n.id),className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id))})},lt=({activeTab:t,setActiveTab:r,children:s})=>e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>r("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>r("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),s]}),dt=({products:t,showProductForm:r,editingProduct:s,productForm:n,formatPrice:a,deleteProduct:d,startEditProduct:c,handleProductSubmit:y,setProductForm:i,setShowProductForm:o,setEditingProduct:m})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:()=>{m("new"),i({name:"",price:0,stock:0,description:"",discounts:[]}),o(!0)},className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a(x.price,x.id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.stock>10?"bg-green-100 text-green-800":x.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[x.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:x.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>c(x),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>d(x.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},x.id))})]})}),r&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:n.name,onChange:x=>i({...n,name:x.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:n.description,onChange:x=>i({...n,description:x.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:n.price===0?"":n.price,onChange:x=>{const{value:u}=x.target;(u===""||/^\d+$/.test(u))&&i({...n,price:u===""?0:parseInt(u)})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:n.stock===0?"":n.stock,onChange:x=>{const{value:u}=x.target;(u===""||/^\d+$/.test(u))&&i({...n,stock:u===""?0:parseInt(u)})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[n.discounts.map((x,u)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:x.quantity,onChange:j=>{const w=[...n.discounts];w[u].quantity=parseInt(j.target.value)||0,i({...n,discounts:w})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:x.rate*100,onChange:j=>{const w=[...n.discounts];w[u].rate=(parseInt(j.target.value)||0)/100,i({...n,discounts:w})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const j=n.discounts.filter((w,T)=>T!==u);i({...n,discounts:j})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},u)),e.jsx("button",{type:"button",onClick:()=>{i({...n,discounts:[...n.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{m(null),i({name:"",price:0,stock:0,description:"",discounts:[]}),o(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:s==="new"?"추가":"수정"})]})]})})]}),ut=({coupons:t,showCouponForm:r,couponForm:s,deleteCoupon:n,handleCouponSubmit:a,setCouponForm:d,setShowCouponForm:c,addNotification:y})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(i=>e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:i.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:i.discountType==="amount"?`${i.discountValue.toLocaleString()}원 할인`:`${i.discountValue}% 할인`})})]}),e.jsx("button",{onClick:()=>n(i.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},i.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>c(!r),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),r&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:s.name,onChange:i=>d({...s,name:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:s.code,onChange:i=>d({...s,code:i.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:s.discountType,onChange:i=>d({...s,discountType:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:s.discountValue===0?"":s.discountValue,onChange:i=>{const{value:o}=i.target;(o===""||/^\d+$/.test(o))&&d({...s,discountValue:o===""?0:parseInt(o)})},onBlur:i=>{const o=parseInt(i.target.value)||0;s.discountType==="percentage"?o>100?(y("할인율은 100%를 초과할 수 없습니다","error"),d({...s,discountValue:100})):o<0&&d({...s,discountValue:0}):o>1e5?(y("할인 금액은 100,000원을 초과할 수 없습니다","error"),d({...s,discountValue:1e5})):o<0&&d({...s,discountValue:0})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:s.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})]})]}),xt=()=>e.jsx(qe,{children:e.jsx(mt,{})}),mt=()=>{const[t,r]=L(Z),[s,n]=L(Ue),[a,d]=L(Ge),[c]=L(oe),[y,i]=L(Ke),[o,m]=L(Qe),[x,u]=L(He),[j,w]=L(Xe),[T,V]=L(Ye),[D,R]=L(Ze),[q,O]=L(B),[,U]=L(Q),C=k.useCallback((g,S="success")=>{const P={id:Date.now().toString(),message:g,type:S,timestamp:Date.now()};U(W=>[...W,P]),setTimeout(()=>{U(W=>W.filter(Ce=>Ce.id!==P.id))},3e3)},[U]),l=k.useCallback(()=>{O([])},[O]),v=k.useCallback(g=>{const S={name:g.name,code:g.code,discountType:g.discountType,discountValue:g.discountValue};n(P=>[...P,S]),C("쿠폰이 추가되었습니다.","success")},[n,C]),b=k.useCallback(g=>{n(S=>S.filter(P=>P.code!==g)),C("쿠폰이 삭제되었습니다.","warning")},[n,C]),p=k.useCallback(g=>{d(g),C("쿠폰이 적용되었습니다.","success")},[d,C]),h=k.useCallback(g=>{const S={id:`p${Date.now()}`,name:g.name,price:g.price,stock:g.stock,description:g.description,discounts:g.discounts};r(P=>[...P,S]),C("상품이 추가되었습니다.","success")},[r,C]),f=k.useCallback((g,S)=>{r(P=>P.map(W=>W.id===g?{...W,name:S.name,price:S.price,stock:S.stock,description:S.description,discounts:S.discounts}:W)),C("상품이 수정되었습니다.","success")},[r,C]),_=k.useCallback(g=>{r(S=>S.filter(P=>P.id!==g)),C("상품이 삭제되었습니다.","warning")},[r,C]),A=k.useCallback((g,S)=>Se(g,S,t,q,c),[t,q,c]),$=k.useCallback(()=>{const g=`ORD-${Date.now()}`;C(`주문이 완료되었습니다. 주문번호: ${g}`,"success"),l(),d(null)},[C,l,d]),z=k.useCallback(g=>{g.preventDefault(),j&&j!=="new"?(f(j,T),w(null)):h(T),V({name:"",price:0,stock:0,description:"",discounts:[]}),w(null),u(!1)},[j,T,f,h,V,w,u]),N=k.useCallback(g=>{g.preventDefault(),v(D),R({name:"",code:"",discountType:"amount",discountValue:0}),i(!1)},[v,D,R,i]),J=k.useCallback(g=>{w(g.id),V({name:g.name,price:g.price,stock:g.stock,description:g.description||"",discounts:g.discounts||[]}),u(!0)},[w,V,u]),M=rt(q,a);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ct,{}),e.jsx(st,{}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:c?e.jsx(lt,{activeTab:o,setActiveTab:m,children:o==="products"?e.jsx(dt,{products:t,showProductForm:x,editingProduct:j,productForm:T,formatPrice:A,deleteProduct:_,startEditProduct:J,handleProductSubmit:z,setProductForm:V,setShowProductForm:u,setEditingProduct:w}):e.jsx(ut,{coupons:s,showCouponForm:y,couponForm:D,deleteCoupon:b,handleCouponSubmit:N,setCouponForm:R,setShowCouponForm:i,addNotification:C})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(ot,{})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsx(at,{}),q.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),s.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:a?.code||"",onChange:g=>{const S=s.find(P=>P.code===g.target.value);S?p(S):d(null)},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),s.map(g=>e.jsxs("option",{value:g.code,children:[g.name," (",g.discountType==="amount"?`${g.discountValue.toLocaleString()}원`:`${g.discountValue}%`,")"]},g.code))]})]}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[M.totalBeforeDiscount.toLocaleString(),"원"]})]}),M.totalBeforeDiscount-M.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(M.totalBeforeDiscount-M.totalAfterDiscount).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[M.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:$,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[M.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})]})]})})]})})]})};_e.createRoot(document.getElementById("root")).render(e.jsx(k.StrictMode,{children:e.jsx(xt,{})}));
